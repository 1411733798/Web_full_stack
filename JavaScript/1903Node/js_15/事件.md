# 事件高级

```javascript
//获取元素
let box=document.querySelsctor(".box");
box.onclick=function(){
    console.log("我是点击事件")
}
box.onclick=function(){
    console.log("我是二号点击事件")
}
//运行结果控制台输出"我是二号点击事件"后面的代码被前面的覆盖了，所以我们需要事件监听来解决问题
```

## 事件监听

>事件监听可以给一个事件添加多个事件处理程序

* 添加事件监听
>语法：事件源.addEventListener(事件类型，回调函数，boolean);

```javascript
function a(){
    console.log("我是事件监听")；
}
box.addEventListener("click",a,false);
//最终的运行结果
//我是点击事件
//我是事件监听
```

* 移除事件监听
>语法：事件源.removeEventListener(事件类型，callback，boolean);

```javascript
box.removeEventListener("click",a,false);
//最终的运行结果
//我是点击事件
```

|参数|作用|
|:----:|:----:|
|event|事件类型，要添加事件监听的类型|
|callback|事件处理函数|
|boolean|true：触发捕获型事件流;false:触发冒泡型事件流|i

## 事件对象

>每一个事件都会有一个事件对象，事件处理函数的第一个参数就是事件对象，里面存储了这个事件相关的信息

```javascript

box.onlick=function(e){
    consloe.log(e);
    //e是事件对象
}
```

### 事件对象常用的属性

* 鼠标相关事件

|属性|描述|
|:----:|:----:|
|clientX|鼠标事件触发时，鼠标相对于浏览器x轴的距离|
|clientY|鼠标事件触发时，鼠标相对于浏览器y轴的距离|
|offsetX|鼠标事件触发时，鼠标相对于事件源x轴的距离|
|offsetY|鼠标事件触发时，鼠标相对于事件源y轴的距离|
|pageX|鼠标事件触发时，鼠标相对于浏览器x轴的距离，包含页面横向滚动的距离|
|pageY|鼠标事件触发时，鼠标相对于浏览器y轴的距离，包含页面纵向滚动的距离|

* 键盘事件常用属性

|属性|描述|
|:----:|:----:|
|key|当前按键的名称|
|keyCode|当前按键的键盘码|
|ctrlKey|判断ctrl键是否按下|
|shiftKey|判断shift键是否按下|
|altKey|判断alt键是否按下|

## 事件流

>事件在触发的时候，会在元素节点和根节点之间进行某种方式的传播，传播过程中遇到的所有的元素节点都会接受到这个事件，这个过程就是事件流

## 事件的传播方式

* 冒泡型事件流

>从最明确的事件源到最不明确的事件源

* 捕获型事件流
>从最不明确的事件源到最明确的事件源

***在事件监听中通过传入第三个参数true和false来表示不同的事件流，true表示捕获型，false表示冒泡型。默认是false***

***子元素的点击事件在触发时同时也会触发父元素的点击事件，解决方法：使用事件监听给子元素添加事件，使用e.stopPropagotion()方法阻止事件的传播，防止同时触发父元素的事件***

### 事件委派

>同时给多个元素添加相同的事件处理程序，可以将事件委派给他们的父元素，通过事件对象中target（e.target）属性来确定当前点击元素。

## 自定义事件

* 事件创建

let  myEvent=new Event(自定义事件的类型)

* 自定义事件的数据传播
>使用coustomEvent构造器
let myEvent=new coustomEvent(自定义事件的类型{
    datail：{要传递的数据，通过e.detail接收}
})

* 自定义事件的触发

>使用window.dispatchEvent来触发（兼容到ie8以后，如果是ie8以前的使用fireEvent触发）
>window.dispatchEvent(myEvent)；

* 自定义事件的监听

```javascript
window.addEventListener(自定义事件类型，callback，boolean)
```